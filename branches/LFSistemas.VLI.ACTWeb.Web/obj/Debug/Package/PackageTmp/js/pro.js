var actionRowWriter=function(t,e,a,i){for(var s="",n="",r="",d="",l=0,o=a.length;o>l;l++)if("acao"===a[l].id.substring(0,4))n=a[l].id.substring(5),n=n.charAt(0).toUpperCase()+n.slice(1),s+='<td><button type="button" class="close red" aria-hidden="true" title="Excluir" onclick="excluir'+n+'(this)"><i class="fa fa-times"></i></button></td>';else if("acoes"===a[l].id.substring(0,5))n=a[l].id.substring(6),n=n.charAt(0).toUpperCase()+n.slice(1),s+='<td><button type="button" class="close red" aria-hidden="true" title="Excluir" onclick="excluir'+n+'(this)"><i class="fa fa-times"></i></button><button type="button" class="close" aria-hidden="true" title="Editar" onclick="editar'+n+'(this)" style="margin-right:10px;"><i class="fa fa-edit"></i></button>',null!=a[l+1]&&"detail"===a[l+1].id.substring(0,6)&&(r=a[l+1].id.substring(7),d=r.charAt(0).toUpperCase()+r.slice(1),d=d.substring(0,d.length-1),s+='<button type="button" class="close add" aria-hidden="true" title="Incluir" onclick="incluir'+d+'(this)" style="margin-right:10px;">+</button>'),s+="</td>";else if("detail"===a[l].id.substring(0,6))if(r=a[l].id.substring(7),null!=e[r]&&e[r].length>0){s+='<td style="display:none;"></td></tr><tr class="sub-row"><td></td><td colspan="'+(a.length-1)+'"><table class="table table-hover table-curved pro-table"><thead><tr>';for(var c=0;c<a.length-1;c++)s+="<th>"+a[c].label+"</th>";s+="</tr></thead><tbody>";for(var u=0;u<e[r].length;u++){s+="<tr>";for(var h=0;h<a.length-1;h++)"acoes"===a[h].id.substring(0,5)?(d=r.charAt(0).toUpperCase()+r.slice(1),d=d.substring(0,d.length-1),s+='<td><button type="button" class="close red" aria-hidden="true" title="Excluir" onclick="excluir'+d+"(this, "+t+')"><i class="fa fa-times"></i></button><button type="button" class="close" aria-hidden="true" title="Editar" onclick="editar'+d+"(this, "+t+')" style="margin-right:10px;"><i class="fa fa-edit"></i></button></td>'):s+="<td>"+e[r][u][a[h].id]+"</td>";s+="</tr>"}s+="</tbody></table></td>"}else s+='<td style="display:none;"></td>';else s+=i(a[l],e);return"<tr>"+s+"</tr>"},checaSubRows=function(t,e){for(var a=t.parentNode,i=0,s=0;s<a.children.length;s++)a.children[s].rowIndex<=e&&"sub-row"===a.children[s].className&&i++;return i},tabelaSimples=function(t){$("#table_"+t).dynatable({features:{paginate:!1,sort:!1,pushState:!1,search:!1,recordCount:!1,perPageSelect:!1},dataset:{records:JSON.parse($("#"+t).val())},writers:{_rowWriter:actionRowWriter}}),verificaNotFound(t)},verificaNotFound=function(t){"[]"==$("#"+t).val()?($("#table_"+t).addClass("hidden"),$("#not_found_"+t).removeClass("hidden")):($("#table_"+t).removeClass("hidden"),$("#not_found_"+t).addClass("hidden"))},atualizarTabela=function(t){var e=$("#table_"+t).data("dynatable");e.records.updateFromJson({records:JSON.parse($("#"+t).val())}),e.dom.update(),verificaNotFound(t)},incluirErro=function(t){var e=$(".errors");e.append('<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>'+t+"</div>")},limparErros=function(){var t=$(".errors");t.html("")},aplicarMascaras=function(){$("[data-mask]").each(function(){$(this).mask($(this).data("mask")),"undefined"!=typeof $(this).data("date")&&$(this).on("blur",function(){moment($(this).val(),"DD/MM/YYYY").isValid()||$(this).val("")}),"undefined"!=typeof $(this).data("time")&&$(this).on("blur",function(){moment($(this).val(),"HH:mm").isValid()||$(this).val("")})})},aplicarValores=function(){$("[data-price]").each(function(){$(this).priceFormat({limit:$(this).data("limit"),prefix:"",centsSeparator:",",thousandsSeparator:".",centsLimit:$(this).data("cents")})})},aplicarAutocompletes=function(){$("[data-autocomplete]").each(function(){var t={selectOnTab:!0,onInitialize:function(){null!=this.revertSettings&&null!=this.revertSettings.$children&&this.revertSettings.$children.length>0&&""===this.revertSettings.$children[0].value&&this.addOption({value:0,text:""})}};"undefined"!=typeof $(this).data("order")&&(t.sortField="sId"),"undefined"!=typeof $(this).data("remote")&&"undefined"==typeof $(this).data("master")&&(t.load=function(t,e){var a={busca:t};if("undefined"!=typeof $(this.$input).data("selected")&&"0"!=$(this.$input).data("selected"))a.id=$(this.$input).data("selected");else if(!t.length)return e();$.ajax({url:$(this.$input).data("remote"),type:"GET",data:a,error:function(){e()},success:function(t){e(t)}})}),"undefined"!=typeof $(this).data("selected")&&"0"!=$(this).data("selected")&&(t.preload=!0),$(this).selectize(t),"undefined"!=typeof $(this).data("selected")&&"0"!=$(this).data("selected")&&$(this)[0].selectize.on("load",function(){"0"!=$(this.$input).data("selected")&&(this.setValue($(this.$input).data("selected")),$(this.$input).attr("data-selected","0"))}),"undefined"!=typeof $(this).data("detail")&&$(this).on("change",function(){enableDetail(this.id,$(this).data("detail"))}),"undefined"!=typeof $(this).data("master")&&"undefined"==typeof $("#"+$(this).data("master")).data("remote")&&enableDetail($(this).data("master"),this.id)})},enableDetail=function(t,e){null!=$("#"+t).val()&&""!=$("#"+t).val()&&"0"!=$("#"+t).val()?($("#"+e)[0].selectize.enable(),$("#"+e)[0].selectize.load(function(a){$.ajax({url:$("#"+e).data("remote"),type:"GET",data:{master_id:$("#"+t).val()},error:function(){a()},success:function(t){if($("#"+e)[0].selectize.clearOptions(),"undefined"!=typeof $("#"+e).data("order")){var i=0;$.each(t,function(e){t[e].sId=i++})}a(t)}})})):($("#"+e)[0].selectize.disable(),$("#"+e)[0].selectize.clearOptions())},convertToArray=function(t){var e=[];for(var a in t)e.push(t[a]);return e},mudarFlag=function(t){var e=$("#"+t),a=$("."+t+"-toggle");"1"===e.val().toString()?a.css("display","block"):a.css("display","none")};